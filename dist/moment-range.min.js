!function(a,b){"function"==typeof define&&define.amd?define(["moment"],function(c){return a.DateRange=b(c)}):"object"==typeof module&&module.exports?module.exports=b(require("moment")):a.DateRange=b(a.moment)}(this,function(a){function b(b,c,d){void 0!==d||"object"!=typeof c||c instanceof a||c instanceof Date||(d=c,c=void 0),this.options=d=d||{},this._setRange=d.contain?this._containIntersect:this._intersect,this.set(b,c,d)}function c(b,c,d){for(var e=a(this.start);this.contains(e,d);)c.call(this,e.clone()),e.add(1,b)}function d(b,c,d){var e=this/b,f=Math.floor(e);if(f!==1/0){f===e&&d&&f--;for(var g=0;g<=f;g++)c.call(this,a(this.start.valueOf()+b.valueOf()*g))}}var e=864e13,f=-864e13,g={year:!0,month:!0,week:!0,day:!0,hour:!0,minute:!0,second:!0};return b.prototype._setDuration=function(){void 0!==this.start?this.duration=a.duration(this.end-this.start):void 0},b.prototype.constructor=b,b.prototype.clone=function(){return a().range(this.start,this.end,this.options)},b.prototype.contains=function(a,c){var d=this.start,e=this.end;return a instanceof b?d<=a.start&&(e>a.end||e.isSame(a.end)&&!c):d<=a&&(e>a||e.isSame(a)&&!c)},b.prototype.overlaps=function(a){return null!==this.intersect(a)},b.prototype.intersect=function(a){var c=this.start,d=this.end;return c<=a.start&&a.start<d&&d<a.end?new b(a.start,d):a.start<c&&c<a.end&&a.end<=d?new b(c,a.end):a.start<c&&c<=d&&d<a.end?this:c<=a.start&&a.start<=a.end&&a.end<=d?a:null},b.prototype.add=function(c){return this.overlaps(c)?new b(a.min(this.start,c.start),a.max(this.end,c.end)):null},b.prototype.subtract=function(a){var c=this.start,d=this.end;return null===this.intersect(a)?[new b(c,d)]:a.start<=c&&c<d&&d<=a.end?[]:a.start<=c&&c<a.end&&a.end<d?[new b(a.end,d)]:c<a.start&&a.start<d&&d<=a.end?[new b(c,a.start)]:c<a.start&&a.start<a.end&&a.end<d?[new b(c,a.start),new b(a.end,d)]:c<a.start&&a.start<d&&a.end<d?[new b(c,a.start),new b(a.start,d)]:void 0},b.prototype.toArray=function(a,b){var c=[];return this.by(a,function(a){c.push(a)},b),c},b.prototype.by=function(a,b,e){return"string"==typeof a?c.call(this,a,b,e):d.call(this,a,b,e),this},b.prototype.toString=function(){return this.start.format()+"/"+this.end.format()},b.prototype.valueOf=function(){return this.end-this.start},b.prototype.center=function(){var b=this.start+this.diff()/2;return a(b)},b.prototype.toDate=function(){return[this.start.toDate(),this.end.toDate()]},b.prototype.isSame=function(a){return this.start.isSame(a.start)&&this.end.isSame(a.end)},b.prototype.diff=function(a){return this.end.diff(this.start,a)},b.prototype.parseRange=function(b,c){return void 0===c&&("string"==typeof b&&(b=b.split("/")),"object"==typeof b&&2===b.length&&(c=b[1],b=b[0])),[a(!b||b<f?f:b),a(!c||c>e?e:c)]},b.prototype._set=function(a,b){var c=this.parseRange(a,b);this.actualStart=c[0],this.actualEnd=c[1]},b.prototype.set=function(b,c,d){this._set(b,c),d&&this._setLimit(d.lowerLimit,d.upperLimit),this.actualDuration=a.duration(this.actualEnd-this.actualStart),this._setRange()},Object.defineProperties(b.prototype,{actualRange:{get:function(){return a.range(this.actualStart,this.actualEnd)},enumerable:!0},limitRange:{get:function(){return a.range(this.lowerLimit,this.upperLimit)},enumerable:!0}}),b.prototype._setLimit=function(b,c){var d=this.parseRange(b,c);this.lowerLimit=d[0],this.upperLimit=d[1],this.limitDuration=a.duration(this.upperLimit-this.lowerLimit)},b.prototype.setLimit=function(a,b){this._setLimit(a,b),this._setRange()},b.prototype._intersect=function(){var a=this.lowerLimit,b=this.upperLimit,c=this.actualStart,d=this.actualEnd;b<c||d<a?(this.start=this.end=void 0,this.atEnd=this.atStart=!1):(c<=a?(this.start=a,this.atStart=!0):(this.start=c,this.atStart=!1),d<=b?(this.end=d,this.atEnd=!1):(this.end=b,this.atEnd=!0)),this._setDuration()},b.prototype.setStart=function(a){this.set(a,this.actualEnd)},b.prototype.setEnd=function(a){this.set(this.actualStart,a)},b.prototype.setLowerLimit=function(a){this.setLimit(a,this.upperLimit)},b.prototype.setUpperLimit=function(a){this.setLimit(this.lowerLimit,a)},b.prototype.clear=function(a,b){var c=a===!1?this.actualStart:void 0,d=b===!1?this.actualEnd:void 0;this.set(c,d)},b.prototype.clearLimits=function(a,b){var c=a===!1?this.lowerLimit:void 0,d=b===!1?this.upperLimit:void 0;this.setLimit(c,d)},b.prototype.shiftForward=function(a){void 0===a&&(a=this.actualEnd-this.actualStart);var b=this.actualStart+a,c=this.actualEnd+a;this.set(b,c)},b.prototype.shiftBackward=function(a){void 0===a&&(a=this.actualEnd-this.actualStart);var b=this.actualStart-a,c=this.actualEnd-a;this.set(b,c)},b.prototype._containIntersect=function(){var b=this.lowerLimit,c=this.upperLimit,d=this.actualStart,g=this.actualEnd;c<g?(this.start=a(Math.max(+d-(+g-c),f)),this.end=c,this.atStart=!1,this.atEnd=!0,this.start<b&&(this.start=b,this.atStart=!0)):d<b?(this.start=b,this.end=a(Math.min(+g+(+b-d),e)),this.atStart=!0,this.atEnd=!1,c<this.end&&(this.end=c,this.atEnd=!0)):(this.start=d,this.end=g,this.atStart=!1,this.atEnd=!1),this._setDuration()},b.prototype.shift=function(a){this.shiftForward(a)},b.prototype.format=function(a,b,c){var d=a?this.start.format(a):"",e=b?this.end.format(b):"";return d&&e?[d,e].join(c||" "):d||e},b.prototype.shiftLimitForward=function(a){void 0===a&&(a=this.upperLimit-this.lowerLimit);var b=this.lowerLimit+a,c=this.upperLimit+a;this.setLimit(b,c)},b.prototype.shiftLimitBackward=function(a){void 0===a&&(a=this.upperLimit-this.lowerLimit);var b=this.lowerLimit-a,c=this.upperLimit-a;this.setLimit(b,c)},b.prototype.shiftLimit=function(a){this.shiftLimitForward(a)},b.prototype.shiftAll=function(a){this.shiftLimitForward(a),this.shiftForward(a)},a.range=function(c,d,e){return c in g?new b(a(this).startOf(c),a(this).endOf(c),e):new b(c,d,e)},a.range.constructor=b,a.fn.range=a.range,a.fn.within=function(a){return a.contains(this._d)},b});